<div class="row mt-2 justify-content-center text-center">
  <h2>Enregistrer un {{typePersonne}}</h2>
</div>
<div class="row h-100 align-items-center justify-content-center">
  <form class="w-50" #form  [formGroup]="saveForm" >
    <div class="col">
      <div class="col">
        <mat-form-field class="mat-form-field d-flex justify-content-center" appearance="fill">
          <mat-label class="">Nom</mat-label>
          <input type="text" matInput formControlName="nom"
                 [errorStateMatcher]="matcher">
<!--          <mat-error class="errorMessage" *ngIf="saveForm.controls['nom'].hasError('required')">-->
<!--            le nom est requit-->
<!--          </mat-error>-->
        </mat-form-field>
      </div>
      <div class="col">
        <mat-form-field class="mat-form-field d-flex justify-content-center" appearance="fill">
          <mat-label class="">Prenom</mat-label>
          <input type="text" matInput formControlName="prenom"
                 [errorStateMatcher]="matcher">
<!--          <mat-error class="errorMessage" *ngIf="saveForm.controls['prenom'].hasError('required')">-->
<!--            le prenom est requit-->
<!--          </mat-error>-->
        </mat-form-field>
      </div>
      <div class="col">
        <mat-form-field class="mat-form-field d-flex justify-content-center" appearance="fill">
          <mat-label class="">Genre</mat-label>

          <mat-select formControlName="genre" [errorStateMatcher]="matcher">
            <mat-option *ngFor="let genre of personGenre" [value]="genre">
              {{genre}}
            </mat-option>
          </mat-select>
          <mat-error class="errorMessage" *ngIf="saveForm.controls['genre'].hasError('required')">
          le genre est requit
        </mat-error>
        </mat-form-field>
      </div>
      <div class="col">
        <div class="row mt-2 justify-content-center">
          <ng-container formArrayName="contact">
            <ng-container *ngFor="let contact of contact.controls; let i = index">
              <div class="lesson-form-row" [formGroupName]="i">

                <div class="row mt-2 justify-content-center">
                  <div class="col-8">
                    <mat-form-field class="mat-form-field d-flex justify-content-center" appearance="fill">
                      <mat-label class="">Telephone</mat-label>
                      <span matPrefix>+237 &nbsp;</span>
                      <input type="tel" matInput formControlName="tel"
                             [errorStateMatcher]="matcher">
                      <mat-error class="errorMessage" *ngIf="contact.get('tel')?.hasError('required')">
                        le telephone est requit
                      </mat-error>
                    </mat-form-field>
                  </div>
                  <div class="col-2">
                    <mat-icon color="accent" class="delete-btn" fontIcon="delete" (click)="deleteLigne(i)"></mat-icon>
                  </div>
                </div>
              </div>
            </ng-container>
          </ng-container>
          <div class="row mb-2  ">
            <div class="col-12 d-flex justify-content-center">
              <button mat-button (click)="addLigne()" [disabled]="nombretel()">
                Ajouter un Contact
                <mat-icon  color="primary">
                <span class="material-symbols-outlined">
                  add_circle
                </span>
                </mat-icon>
              </button>

            </div>

          </div>
        </div>

      </div>
      <div class="col">
        <mat-form-field class="mat-form-field d-flex justify-content-center" appearance="fill">
          <mat-label class="">pays</mat-label>
          <input type="text" matInput formControlName="pays"
                 [errorStateMatcher]="matcher">
          <mat-error class="errorMessage" *ngIf="saveForm.controls['pays'].hasError('required')">
            le pays est requit
          </mat-error>
        </mat-form-field>
      </div>
      <div class="col">
        <mat-form-field class="mat-form-field d-flex justify-content-center" appearance="fill">
          <mat-label class="">Ville</mat-label>
          <input type="text" matInput formControlName="ville"
                 [errorStateMatcher]="matcher">
          <mat-error class="errorMessage" *ngIf="saveForm.controls['ville'].hasError('required')">
            la ville est requit
          </mat-error>
        </mat-form-field>
      </div>
      <div class="col">
        <mat-form-field class="mat-form-field d-flex justify-content-center" appearance="fill">
          <mat-label class="">Quartier</mat-label>
          <input type="text" matInput formControlName="quartier"
                 [errorStateMatcher]="matcher">
        </mat-form-field>
      </div>
    </div>
    <div class="col">
      <mat-form-field class="mat-form-field d-flex justify-content-center" appearance="fill">
        <mat-label class="">Email</mat-label>
        <input type="text" matInput formControlName="mail"
               [errorStateMatcher]="matcher">
        <mat-error class="errorMessage" *ngIf="saveForm.controls['mail'].hasError('email')">
          le mail n'est pas correct
        </mat-error>
      </mat-form-field>
    </div>
    <div class="row mt-5">
        <button (click)="formSubmit()" mat-raised-button color="primary">Enregistrer</button>

    </div>
  </form>
</div>
